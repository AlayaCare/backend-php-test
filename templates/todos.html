{% extends "layout.html" %}

{% block content %}

{% for alert in app.session.flashbag.get('message') %}
<div class="error-message">
    <div class="well text-center">
    	<h4 class="text-warning">{{ alert }}</h4>
    </div>
</div>
{% endfor %}
<h1 class="text-center">Todo List:</h1>

<div id="app">
    <v-todo-table :columns="columns" :data="data" :options="options">
       <a slot="title" slot-scope="props" :href="props.row.url">${ props.row.title }</a>
       <a slot="url" slot-scope="props" :href="props.row.url" class="glyphicon glyphicon-pencil"></a>
       <form slot="delete"  class="hidden-xs" slot-scope="props" method="post" :action="props.row.delete">
            <button type="submit" class="btn btn-xs btn-danger"><span class="glyphicon glyphicon-remove glyphicon-white"></span></button>
       </form>
       <template slot="child_row" scope="props">
            <div><b>Description:</b><br> ${ props.row.description }</div>
       </template>
    </v-todo-table>
</div>
<div class="col-md-4 col-md-offset-4">
    <h2 class="text-center">Add a Todo:</h2>

    <form method="post" action="/todo/add" class="form-horizontal add-todo">
       <div class="input-group">
            <button type="submit" class="btn btn-sm btn-primary pull-right">Add</button>
            <input type="text" name="title" placeholder="My title">
            <textarea rows="3" name="description" class="form-control" placeholder="Description..."></textarea>
       </div>
    </form>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.8/vue.min.js"></script>
<script src="/js/vue-tables.js"></script>
<script> var todo = {{ todos|raw }};</script>
<script src="/js/todo.js"></script>

{% endblock %}
