{% extends "layout.html" %}
{% block content %}

         
		
	    <h1>Todo List:</h1>
		
		{% for flashMessage in app.session.flashbag.get('success') %}

			<div style="background: #b8f2b8;padding: 5px;border-radius: 3px;margin-bottom: 12px;"><b>Success !</b> {{ flashMessage }}</div>

		{% endfor %}
		
		
        <table id="example" class="display" width="100%" cellspacing="0">        
		<thead>
            <tr>
			<th>#</th>
			<th>User ID</th>
			<th>Description</th>
			<th>JSON</th>
			<th>Action</th>
			
			</tr>
		</thead>
        <tbody>
		{% for todo in todos %}
            <tr>
                <td>{{ todo.id }}</td>
                <td>{{ todo.user_id }}</td>
                <td>
                    <a href="{{ app.request.baseurl }}/todo/{{ todo.id }}">
                       {{ todo.description }}
                    </a>
                </td>
				<td><a class="btn btn-sm btn-primary jsonexport" href="{{ app.request.baseurl }}/todo/{{ todo.id }}/json">JSON</a></td>
                <td>
                    <form method="post" action="{{ app.request.baseurl }}/todo/delete/{{ todo.id }}">
                        <button type="submit" class="btn btn-xs btn-danger allow_rem"><span class="glyphicon glyphicon-remove glyphicon-white"></span></button>
                    </form>
                </td>
				
            </tr>
        {% endfor %}
		</tbody>
       
		
    </table>
	
	    <table width="50%">
		<tr>
            <form method="post" action="{{ app.request.baseurl }}/todo/add">
                <td width="50%">
                    <input type="textbox" name="description" style="width:90%" class="small-6 small-center desc" placeholder="Description..."><br /><span class="descerror error" ></span>
                </td>
                <td>
                    <button type="submit" class="btn btn-sm btn-primary allow">Add</button>
					
                </td>
            </form>
			
		</tr>
        </table>
		<br /><br /><br />
</div>


<script type="text/javascript">
$(document).ready(function() {
    $('#example').DataTable();
} );
</script>

<script type="text/javascript">
$(document).on('click','.allow',function(){
var desc = $('.desc').val();
var flag = 1;
if(desc=='')
{
  $('.descerror').html('Please enter your description');
  flag = 0;
}
if(flag==1)
{ 
  return true;
}
return false;
});
</script>
<script type="text/javascript">
$(document).on('click','.allow_rem',function(){
var result = confirm("Are you want to delete ?");
if (result) {
    return result;
}
return false;
});
</script>

<!-- 
<script type="text/javascript">
$(document).on('click','.jsonexport',function()
{
alert('Hasghas');
  $.ajax({
     method :'POST',
	 url : 'http://localhost/backend/web/index.php/json',
	 success:function(data)
	 {
		alert(data);
	 }
  
  });
return false;
});
</script> -->


{% endblock %}